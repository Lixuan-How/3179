<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Population Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.8.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.0"></script>
    <style>
        body {
            font-family: serif, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fceeed;
        }
        #vis-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .chart {
            width: 900px;  
            margin: 20px 0; 
            position: relative; 
        }
        /* For annotation styling */
        .annotation {
            max-width: 800px;
            text-align: center;
            margin-bottom: 10px;
            font-family: sans-serif;
        }
        h1, h2 {
            margin: 0;
            padding: 10px;
        }
        p {
            margin: 5px 0 5px 0;
        }
        /* New CSS for choropleth map annotation */
        .choropleth-annotation {
            font-family: sans-serif;
            font-size: small;
            position: absolute;  
            bottom: 90px;        
            right: -100px;     
            max-width: 200px;  
            background-color: rgba(255, 255, 255, 0.8); 
            padding: 10px;     
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Subtle shadow */
            z-index: 10; /* Ensure it appears above the map */
        }
        .flex-container {
            display: flex;       
            align-items: center; 
            position: relative;
        }
        /* New CSS for bar chart annotation */
        .bar-chart-annotation {
            font-family: sans-serif;
            font-size: small; 
            position: absolute; 
            right: -90px;     
            top: 320px;      
            max-width: 200px; 
            background-color: rgba(255, 255, 255, 0.8); 
            padding: 10px;   
            border-radius: 5px; 
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); 
            z-index: 10; 
        }
        /* New CSS for bump chart annotation */
        .bump-chart-annotation {
            font-family: sans-serif;
            font-size: small;
            position: absolute;  
            bottom: 40px;        
            right: -170px;     
            max-width: 200px;  
            background-color: rgba(255, 255, 255, 0.8); 
            padding: 10px;     
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Subtle shadow */
            z-index: 10; 
        }
    </style>
</head>
<body>

<div id="vis-container">
    <h1>POPULATION VISUALIZATION IN MALAYSIA</h1>

    <!-- Description for the choropleth map -->
    <div class="annotation">
        <h2>Population Density by States</h2>
        <p>
          The choropleth map visualizes the population density across Malaysia's states. It uses color gradients to represent
          differences in population density, providing a geographical overview of where the highest and lowest densities occur.
        </p>
    </div>

    <!-- Flex container for choropleth map and its annotation -->
    <div class="flex-container">
        <!-- Choropleth map visualization -->
        <div id="choropleth-map" class="chart"></div>
        
        <!-- Choropleth map annotation -->
        <div class="choropleth-annotation">
            <p><strong>Kuala Lumpur mostly has the highest density over the year.</strong></p>
            <p>This is reasonable as Kuala Lumpur is the capital of Malaysia.</p>
        </div>
    </div>

    <!-- Description for the bar chart -->
    <div class="annotation">
        <h2>Population Number by States</h2>
        <p>
          This bar chart shows the total population in various states of Malaysia, filtered by year, population number, and ethnicity.
          Use the controls to adjust the year and ethnicity filters to explore population distribution trends over time (1970-2024).
        </p>
    </div>

    <!-- Bar chart visualization -->
    <div class="flex-container">
        <div id="bar-chart" class="chart"></div>
        
        <!-- Bar chart annotation -->
        <div class="bar-chart-annotation">
            <p>The annotations on the left side of the bars represent the total populations of females and males.</p>
        </div>
    </div>
    

    <!-- Bump chart visualization -->
    <div class="annotation">
        <h2>Rank of Employment Rate by States</h2>
        <p>
          This bump chart visualizes the employment ranks of the top 16 states in Malaysia from 1982 to 2020. 
          Each colored line represents a state, allowing for easy comparison of trends over the years, 
          with lower ranks indicating better employment performance.
        </p>
    </div>

    <!-- Bump chart visualization -->
    <div class="flex-container">
        <div id="bump-chart" class="chart"></div>
        
        <!-- Bump chart annotation -->
        <div class="bump-chart-annotation">
            <p><strong>The default line chart (without select the state line or image above) is showing the overview of overall employment rate by states.<strong> </p>
        </div>
    </div>
</div>

<script>
    var specVis1 = "js/choropleth_map.vg.json"; // Update to load choropleth first
    var specVis2 = "js/bar_chart.vg.json";
    var specVis3 = "js/bump_chart_Selection_employment.vg.json";

    // Load choropleth map
    vegaEmbed('#choropleth-map', specVis1).then(function(result) {
        console.log("Choropleth map loaded successfully!");
    }).catch(console.error);

    // Load bar chart
    vegaEmbed('#bar-chart', specVis2).then(function(result) {
        console.log("Bar chart loaded successfully!");
    }).catch(console.error);

    // Load bump chart
    vegaEmbed('#bump-chart', specVis3).then(function(result) {
        console.log("Bump-Chart loaded successfully!");
    }).catch(console.error);
</script>

</body>
</html>
