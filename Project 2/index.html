<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Population Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.8.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.0"></script>
    <style>
        body {
            font-family: serif, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fceeed;
        }
        #vis-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .chart {
            width: 800px;  /* Set a uniform width for charts */
            margin: 20px 0; /* Add space between charts */
        }
        /* For annotation styling */
        .annotation {
            max-width: 800px;
            text-align: center;
            margin-bottom: 20px;
            font-family: sans-serif;
        }
        h1, h2 {
            margin: 0;
            padding: 10px;
        }
        p {
            margin: 5px 0 10px 0;
        }
    </style>
</head>
<body>

<div id="vis-container">
    <h1>POPULATION VISUALIZATION IN MALAYSIA</h1>

    <!-- Description for the choropleth map -->
    <div class="annotation">
        <h2>Population Density by States</h2>
        <p>
          The choropleth map visualizes the population density across Malaysia's states. It uses color gradients to represent
          differences in population density, providing a geographical overview of where the highest and lowest densities occur.
        </p>
    </div>

    <!-- Choropleth map visualization -->
    <div id="choropleth-map" class="chart"></div>

    <!-- Description for the bar chart -->
    <div class="annotation">
        <h2>Population Number by States</h2>
        <p>
          This bar chart shows the total population in various states of Malaysia, filtered by year, population number, and ethnicity.
          Use the controls to adjust the year and ethnicity filters to explore population distribution trends over time (1970-2024).
        </p>
    </div>

    <!-- Bar chart visualization -->
    <div id="bar-chart" class="chart"></div>

    <!-- Bump chart visualization -->
    <div class="annotation">
        <h2>Rank of Employment Rate by States</h2>
        <p>
          This bump chart visualizes the employment ranks of the top 16 states in Malaysia from 1982 to 2020. 
          Each colored line represents a state, allowing for easy comparison of trends over the years, 
          with lower ranks indicating better employment performance.
        </p>
    </div>

    <!-- Bump chart visualization -->
    <div id="bump-chart" class="chart"></div>
</div>

<script>
    var specVis1 = "js/choropleth_map.vg.json"; // Update to load choropleth first
    var specVis2 = "js/bar_chart.vg.json";
    var specVis3 = "js/bump_chart_Selection_employment.vg.json";

    // Load choropleth map
    vegaEmbed('#choropleth-map', specVis1).then(function(result) {
        console.log("Choropleth map loaded successfully!");
    }).catch(console.error);

    // Load bar chart
    vegaEmbed('#bar-chart', specVis2).then(function(result) {
        console.log("Bar chart loaded successfully!");
    }).catch(console.error);

    // Load bump chart
    vegaEmbed('#bump-chart', specVis3).then(function(result) {
        console.log("Bump-Chart loaded successfully!");
    }).catch(console.error);
</script>

</body>
</html>
